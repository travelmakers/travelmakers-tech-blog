<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Removing sensitive data from the git history</title><meta name="robots" content="follow, index"/><meta name="description" content="Its a bad practice to keep sensitive data like password in your repository. How can I remove that from previous commits (git history)?"/><meta property="og:url" content="https://travelmakers.github.io/travelmakers-tech-blog/blog/removing-sensitive-data-from-git"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Travelmakers Blog"/><meta property="og:description" content="Its a bad practice to keep sensitive data like password in your repository. How can I remove that from previous commits (git history)?"/><meta property="og:title" content="Removing sensitive data from the git history"/><meta property="og:image" content="https://travelmakers.github.io/travelmakers-tech-blog/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="Removing sensitive data from the git history"/><meta name="twitter:description" content="Its a bad practice to keep sensitive data like password in your repository. How can I remove that from previous commits (git history)?"/><meta name="twitter:image" content="https://travelmakers.github.io/travelmakers-tech-blog/static/images/twitter-card.png"/><meta property="article:published_time" content="2021-09-03T00:00:00.000Z"/><meta property="article:modified_time" content="2021-09-03T00:00:00.000Z"/><link rel="canonical" href="https://travelmakers.github.io/travelmakers-tech-blog/blog/removing-sensitive-data-from-git"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://travelmakers.github.io/travelmakers-tech-blog/blog/removing-sensitive-data-from-git"
  },
  "headline": "Removing sensitive data from the git history",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://travelmakers.github.io/travelmakers-tech-blog/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2021-09-03T00:00:00.000Z",
  "dateModified": "2021-09-03T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Travelmakers"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "GiDong Seong",
    "logo": {
      "@type": "ImageObject",
      "url": "https://travelmakers.github.io/travelmakers-tech-blog/static/images/logo.png"
    }
  },
  "description": "Its a bad practice to keep sensitive data like password in your repository. How can I remove that from previous commits (git history)?"
}</script><meta name="next-head-count" content="21"/><link rel="preload" href="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/css/3741904e7ec41d8d.css" as="style"/><link rel="stylesheet" href="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/css/3741904e7ec41d8d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/webpack-21c5ff5e0f618f00.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/main-8d9c8cb7de4ec755.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/pages/_app-eebad69513f9d149.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/framework-327e104994690a53.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/207-fe4840c2cce4fd38.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/883-c0e0e5cd3a71eb83.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/chunks/pages/blog/%5B...slug%5D-d4f45be56f6b5698.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/D82Nc3Q66Up7nu3U_4bgC/_buildManifest.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/D82Nc3Q66Up7nu3U_4bgC/_ssgManifest.js" defer=""></script><script src="https://travelmakers.github.io/travelmakers-tech-blog/_next/static/D82Nc3Q66Up7nu3U_4bgC/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="antialiased text-black bg-white dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex flex-col justify-between h-screen"><header class="flex items-center justify-between py-10"><div><a aria-label="Tailwind CSS Blog" href="/travelmakers-tech-blog"><div class="flex items-center justify-between"><div class="flex mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMjYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Logo" srcSet="https://travelmakers.github.io/travelmakers-tech-blog/static/images/logo.svg?auto=format&amp;fit=max&amp;w=48 1x, https://travelmakers.github.io/travelmakers-tech-blog/static/images/logo.svg?auto=format&amp;fit=max&amp;w=96 2x" src="https://travelmakers.github.io/travelmakers-tech-blog/static/images/logo.svg?auto=format&amp;fit=max&amp;w=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="hidden text-2xl font-semibold sm:block">Travelmakers Blog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/travelmakers-tech-blog/blog">Blog</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/travelmakers-tech-blog/tags">Tags</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/travelmakers-tech-blog/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="w-8 h-8 p-1 ml-1 mr-1 rounded sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="w-8 h-8 py-1 ml-1 mr-1 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed w-full h-full top-24 right-0 bg-gray-200 dark:bg-gray-800 opacity-95 z-10 transform ease-in-out duration-300 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed w-full h-full cursor-auto focus:outline-none"></button><nav class="fixed h-full mt-8"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/travelmakers-tech-blog/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/travelmakers-tech-blog/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/travelmakers-tech-blog/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed flex-col hidden gap-3 right-8 bottom-8 md:hidden"><button aria-label="Scroll To Top" type="button" class="p-2 text-gray-500 transition-all bg-gray-200 rounded-full dark:text-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 hover:bg-gray-300"><svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2021-09-03T00:00:00.000Z">2021년 9월 3일 금요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Removing sensitive data from the git history</h1></div></div></header><div class="pb-8 divide-y divide-gray-200 xl:divide-y-0 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:pt-11 xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 xl:block sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="w-10 h-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://travelmakers.github.io/travelmakers-tech-blog/static/images/avatar.png?auto=format&amp;fit=max&amp;w=48 1x, https://travelmakers.github.io/travelmakers-tech-blog/static/images/avatar.png?auto=format&amp;fit=max&amp;w=96 2x" src="https://travelmakers.github.io/travelmakers-tech-blog/static/images/avatar.png?auto=format&amp;fit=max&amp;w=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="w-10 h-10 rounded-full" loading="lazy"/></noscript></span><dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Travelmakers</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:pb-0 xl:col-span-3 xl:row-span-2"><div class="pt-10 pb-8 prose dark:prose-dark max-w-none"><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwMCIgaGVpZ2h0PSIzMzEzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></span><img alt="tailwind-nextjs-banner" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="tailwind-nextjs-banner" srcSet="https://travelmakers.github.io/travelmakers-tech-blog/static/images/yancy-min-code-unsplash.jpg?auto=format&amp;fit=max&amp;w=3840 1x" src="https://travelmakers.github.io/travelmakers-tech-blog/static/images/yancy-min-code-unsplash.jpg?auto=format&amp;fit=max&amp;w=3840" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<p>Perhaps you saved sensitive data like a password or a token in your project. From a security point of view, it’s a bad practice to put them in your code directly and keep them in the repository. For example, the best approach in the Node.js app and other languages is to save sensitive data in the environment variables. So it is kept in a separate file called <code>.env</code>. Not to be tracked by Git, it is added to <code>.gitignore</code>. But if you check your previous commits, you will see that sensitive data exists in the git history. So what should be done now?!</p>
<hr/>
<p>You have two options: <a target="_blank" rel="noopener noreferrer" href="https://git-scm.com/docs/git-filter-branch">Git built-in command</a> <code>git filter-branch</code> or <a target="_blank" rel="noopener noreferrer" href="https://rtyley.github.io/bfg-repo-cleaner/">BFG Repo-Cleaner tool</a>. In this article, I want to show how to use the BFG Repo-Cleaner tool to rewrite your repository’s history.</p>
<blockquote>
<p>The BFG Repo-Cleaner is a tool that’s built and maintained by the open-source community. It provides a faster, simpler alternative to <code>git filter-branch</code> for removing unwanted data. (<a target="_blank" rel="noopener noreferrer" href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository#using-the-bfg">GitHub</a>)</p>
</blockquote>
<hr/>
<div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line">mongoose
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token string">&#x27;mongodb+srv://user&lt;password&gt;@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">useCreateIndex</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">useFindAndModify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;DB connection successful!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code></pre></div>
<p>The above code is a part of a Node.js app that allows you to connect to the MongoDB Atlas via mongoose driver. For that, you need a connection string that has been bold in that code. That connection string is a sample of sensitive data.</p>
<p>At first, create a file <code>.env</code>.local to save your connection string in a variable called <code>DATABASE</code>.</p>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">DATABASE=mongodb+srv://user&lt;password&gt;@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority
</span></code></pre></div>
<p>Then replace that connection string with the one in <code>.env.local</code> as <code>process.env.DATABASE</code> in your code like below:</p>
<div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line">mongoose
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">DATABASE</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">useCreateIndex</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">useFindAndModify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;DB connection successful!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code></pre></div>
<p>In Node.js, you can access environment variables through <code>process</code>.</p>
<p>You will commit the changes, although previous ones show the connection string right in the code. To replace that connection string with <code>process.env.DATABASE</code> the rest of the commits should be followed by these instructions:</p>
<ul>
<li>
<p>If in a macOS, you can use Homebrew to install the BFG Repo-Cleaner tool: <code>brew install bfg</code> and if in Windows, use Chocolatey: <code>choco install bfg-repo-cleaner</code> or download its jar file from their <a target="_blank" rel="noopener noreferrer" href="https://rtyley.github.io/bfg-repo-cleaner/">site</a>.</p>
</li>
<li>
<p>Replace the sensitive data with the one you want, then commit your changes. Don’t forget this step. In this case, replace <code>mongodb+srv://user&lt;password&gt;@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority</code> with <code>process.env.DATABASE</code>.</p>
</li>
<li>
<p>Create a text file (e.x. <code>replacements.txt</code>) to the substitutions. According to <a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/a/15730571/7515532">Tyle answered in StackOverflow</a>, in this case, the text file contains:</p>
</li>
</ul>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">DATABASE=mongodb+srv://user&lt;password&gt;@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority==&gt;process.env.DATABASE
</span></code></pre></div>
<ul>
<li>Then run the below code from your project folder. If you installed BFG through its jar file from their site, replace the <code>bfg</code> command with <code>java -jar bfg.jar</code>.</li>
</ul>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">bfg --replace-text replacements.txt
</span></code></pre></div>
<ul>
<li>After getting the “BFG run is complete!” message, run this code:</li>
</ul>
<div class="relative"><pre><code class="code-highlight"><span class="code-line">git reflog expire --expire=now --all &amp;&amp; git gc --prune=now --aggressive
</span></code></pre></div>
<ul>
<li>Now check your previous commits, and you will see the replacements overall in the repository.</li>
</ul>
<hr/>
<p>If you like this article, you can support me by ☕️ <a target="_blank" rel="noopener noreferrer" href="https://www.buymeacoffee.com/luckydevboy">buying a coffee</a> ☕️ and motivating me to publish more articles.</p></div></div><footer><div class="text-sm font-medium leading-5 divide-gray-200 xl:divide-y dark:divide-gray-700 xl:col-start-1 xl:row-start-2"><div class="py-4 xl:py-8"><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/travelmakers-tech-blog/tags/git">git</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/travelmakers-tech-blog/blog/vscode-snippets">What are Snippets in VSCode?</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/travelmakers-tech-blog/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:apply@travelmakers.kr"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/travelmakers"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>GiDong Seong</div><div> • </div><div>© 2022</div><div> • </div><a href="/travelmakers-tech-blog">Travelmakers Blog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var r=a=\u003eo(a,\"__esModule\",{value:!0});var N=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),g=(a,s)=\u003e{r(a);for(var t in s)o(a,t,{get:s[t],enumerable:!0})},k=(a,s,t)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026o(a,n,{get:()=\u003es[n],enumerable:!(t=p(s,n))||t.enumerable});return a},y=a=\u003ek(r(o(a!=null?d(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=N((x,i)=\u003e{i.exports=_jsx_runtime});var A={};g(A,{default:()=\u003ev,frontmatter:()=\u003ef});var e=y(l()),f={title:\"Removing sensitive data from the git history\",date:\"2021-09-03\",lastmod:\"2021-09-03\",tags:[\"git\"],draft:!1,summary:\"Its a bad practice to keep sensitive data like password in your repository. How can I remove that from previous commits (git history)?\",authors:[\"default\"]};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({div:\"div\",p:\"p\",code:\"code\",hr:\"hr\",a:\"a\",blockquote:\"blockquote\",pre:\"pre\",span:\"span\",ul:\"ul\",li:\"li\"},a.components),{Image:c}=n;return c||w(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.div,{children:(0,e.jsx)(c,{alt:\"tailwind-nextjs-banner\",src:\"/static/images/yancy-min-code-unsplash.jpg\",width:\"5000\",height:\"3313\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Perhaps you saved sensitive data like a password or a token in your project. From a security point of view, it\\u2019s a bad practice to put them in your code directly and keep them in the repository. For example, the best approach in the Node.js app and other languages is to save sensitive data in the environment variables. So it is kept in a separate file called \",(0,e.jsx)(n.code,{children:\".env\"}),\". Not to be tracked by Git, it is added to \",(0,e.jsx)(n.code,{children:\".gitignore\"}),\". But if you check your previous commits, you will see that sensitive data exists in the git history. So what should be done now?!\"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"You have two options: \",(0,e.jsx)(n.a,{href:\"https://git-scm.com/docs/git-filter-branch\",children:\"Git built-in command\"}),\" \",(0,e.jsx)(n.code,{children:\"git filter-branch\"}),\" or \",(0,e.jsx)(n.a,{href:\"https://rtyley.github.io/bfg-repo-cleaner/\",children:\"BFG Repo-Cleaner tool\"}),\". In this article, I want to show how to use the BFG Repo-Cleaner tool to rewrite your repository\\u2019s history.\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"The BFG Repo-Cleaner is a tool that\\u2019s built and maintained by the open-source community. It provides a faster, simpler alternative to \",(0,e.jsx)(n.code,{children:\"git filter-branch\"}),\" for removing unwanted data. (\",(0,e.jsx)(n.a,{href:\"https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository#using-the-bfg\",children:\"GitHub\"}),\")\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`mongoose\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"connect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'mongodb+srv://user\u003cpassword\u003e@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true\u0026w=majority'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useNewUrlParser\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useCreateIndex\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useFindAndModify\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useUnifiedTopology\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB connection successful!'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"The above code is a part of a Node.js app that allows you to connect to the MongoDB Atlas via mongoose driver. For that, you need a connection string that has been bold in that code. That connection string is a sample of sensitive data.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"At first, create a file \",(0,e.jsx)(n.code,{children:\".env\"}),\".local to save your connection string in a variable called \",(0,e.jsx)(n.code,{children:\"DATABASE\"}),\".\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`DATABASE=mongodb+srv://user\u003cpassword\u003e@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true\u0026w=majority\n`})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Then replace that connection string with the one in \",(0,e.jsx)(n.code,{children:\".env.local\"}),\" as \",(0,e.jsx)(n.code,{children:\"process.env.DATABASE\"}),\" in your code like below:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`mongoose\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"connect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"process\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"env\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"DATABASE\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useNewUrlParser\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useCreateIndex\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useFindAndModify\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"useUnifiedTopology\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'DB connection successful!'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In Node.js, you can access environment variables through \",(0,e.jsx)(n.code,{children:\"process\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"You will commit the changes, although previous ones show the connection string right in the code. To replace that connection string with \",(0,e.jsx)(n.code,{children:\"process.env.DATABASE\"}),\" the rest of the commits should be followed by these instructions:\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"If in a macOS, you can use Homebrew to install the BFG Repo-Cleaner tool: \",(0,e.jsx)(n.code,{children:\"brew install bfg\"}),\" and if in Windows, use Chocolatey: \",(0,e.jsx)(n.code,{children:\"choco install bfg-repo-cleaner\"}),\" or download its jar file from their \",(0,e.jsx)(n.a,{href:\"https://rtyley.github.io/bfg-repo-cleaner/\",children:\"site\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"Replace the sensitive data with the one you want, then commit your changes. Don\\u2019t forget this step. In this case, replace \",(0,e.jsx)(n.code,{children:\"mongodb+srv://user\u003cpassword\u003e@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true\u0026w=majority\"}),\" with \",(0,e.jsx)(n.code,{children:\"process.env.DATABASE\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"Create a text file (e.x. \",(0,e.jsx)(n.code,{children:\"replacements.txt\"}),\") to the substitutions. According to \",(0,e.jsx)(n.a,{href:\"https://stackoverflow.com/a/15730571/7515532\",children:\"Tyle answered in StackOverflow\"}),\", in this case, the text file contains:\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`DATABASE=mongodb+srv://user\u003cpassword\u003e@cluster0.fzrkd.mongodb.net/myFirstDatabase?retryWrites=true\u0026w=majority==\u003eprocess.env.DATABASE\n`})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Then run the below code from your project folder. If you installed BFG through its jar file from their site, replace the \",(0,e.jsx)(n.code,{children:\"bfg\"}),\" command with \",(0,e.jsx)(n.code,{children:\"java -jar bfg.jar\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`bfg --replace-text replacements.txt\n`})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"After getting the \\u201CBFG run is complete!\\u201D message, run this code:\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`git reflog expire --expire=now --all \u0026\u0026 git gc --prune=now --aggressive\n`})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Now check your previous commits, and you will see the replacements overall in the repository.\"}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you like this article, you can support me by \\u2615\\uFE0F \",(0,e.jsx)(n.a,{href:\"https://www.buymeacoffee.com/luckydevboy\",children:\"buying a coffee\"}),\" \\u2615\\uFE0F and motivating me to publish more articles.\"]})]})}}var v=b;function w(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return A;})();\n;return Component;","toc":[],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.56,"time":213600,"words":712},"slug":"removing-sensitive-data-from-git","fileName":"removing-sensitive-data-from-git.mdx","title":"Removing sensitive data from the git history","date":"2021-09-03T00:00:00.000Z","lastmod":"2021-09-03","tags":["git"],"draft":false,"summary":"Its a bad practice to keep sensitive data like password in your repository. How can I remove that from previous commits (git history)?","authors":["default"]}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.3,"time":18000,"words":60},"slug":["default"],"fileName":"default.md","name":"Travelmakers","avatar":"/static/images/avatar.png","occupation":"트래블메이커스","company":null,"email":"apply@travelmakers.kr","github":"https://github.com/travelmakers","date":null}],"prev":null,"next":{"title":"What are Snippets in VSCode?","date":"2021-11-08T00:00:00.000Z","lastmod":"2021-11-08","tags":["vscode","snippet","react","typescript"],"draft":false,"summary":"Code snippets are templates that make it easier to enter repeating code patterns, such as loops or conditional-statements.","authors":["default"],"slug":"vscode-snippets"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["removing-sensitive-data-from-git"]},"buildId":"D82Nc3Q66Up7nu3U_4bgC","assetPrefix":"https://travelmakers.github.io/travelmakers-tech-blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>